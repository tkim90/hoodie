!function(t){function e(e){for(var r,a,u=e[0],c=e[1],l=e[2],s=0,p=[];s<u.length;s++)a=u[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(f&&f(e);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var f=c;i.push([58,1]),n()}({58:function(t,e,n){"use strict";n.r(e);var r=n(2),o=n.n(r),i=n(19),a=n.n(i),u=n(6);n(30);function c(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    @media (max-width: ","em) {\n      ",";\n    }\n  "]);return c=function(){return t},t}var l={giant:1170,desktop:992,tablet:768,phone:376},f=Object.keys(l).reduce((function(t,e){var n=l[e]/16;return t[e]=function(){return Object(u.a)(c(),n,u.a.apply(void 0,arguments))},t}),{});function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(){var t=v(["\n    width: 100%;\n  "]);return d=function(){return t},t}function m(){var t=v(["\n  font-family: Helvetica, sans-serif;\n  font-size: 20px;\n  font-weight: bold;\n  text-align: center;\n  width: 97.5%;\n\n  ","\n"]);return m=function(){return t},t}function v(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g=u.b.input(m(),f.phone(d())),O=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=y(e).call(this,t))||"object"!==s(o)&&"function"!=typeof o?h(r):o).handleChange=n.handleChange.bind(h(n)),n.handleSubmit=n.handleSubmit.bind(h(n)),n.onSelect=n.onSelect.bind(h(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,t),n=e,(r=[{key:"handleChange",value:function(t){this.props.searchCity(t.target.value)}},{key:"handleSubmit",value:function(t){t.preventDefault(),console.log("Submitted form.")}},{key:"onSelect",value:function(t){console.log(t)}},{key:"fetchCityCoordinates",value:function(){}},{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(g,{placeholder:"Search city",onChange:this.handleChange}))}}])&&p(n.prototype,r),i&&p(n,i),e}(o.a.Component);function w(){var t=x(["\n    display:none;\n  "]);return w=function(){return t},t}function S(){var t=x(["\n  content: url(../assets/logo.png);\n  opacity: 0.8;\n  height: 86%;\n  width: 100.5%;\n\n  ","\n"]);return S=function(){return t},t}function j(){var t=x(["\n    height: 30px;\n    width: 100%;\n    top: 0%;\n    right: 0%;\n  "]);return j=function(){return t},t}function k(){var t=x(["\n  position: absolute;\n  height: 200px;\n  width: 200px;\n  z-index: 11;\n  right: 3%;\n  top: 30%;\n\n  ","\n"]);return k=function(){return t},t}function x(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var C=u.b.div(k(),f.phone(j())),E=u.b.div(S(),f.phone(w())),_=function(t){return o.a.createElement(C,null,o.a.createElement(O,{searchCity:t.searchCity,isLoading:t.isLoading}),o.a.createElement(E,null))},P=n(15);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(){return(z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(){var t=B(["\n    font-size: 15px;\n  "]);return M=function(){return t},t}function F(){var t=B(["\n  font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  white-space: normal !important;\n  will-change: transform;\n  text-align: left;\n  color: white;\n  user-select: none;\n  font-weight: 900;\n  max-width: 150px;\n  word-wrap: break-word;\n  line-height: 104%;\n  -webkit-text-stroke: 1px black;\n  font-size: 30px;\n\n  ","\n"]);return F=function(){return t},t}function G(){var t=B(["\n    font-size: 15px;\n  "]);return G=function(){return t},t}function L(){var t=B(["\n  font-family: Helveitca Neue, sans-serif;\n  border: 3px solid black;\n  z-index: 70;\n  position: absolute;\n  opacity: 1.0 !important;\n  border-radius: 25px;\n  font-size: 30px;\n\n  ","\n"]);return L=function(){return t},t}function B(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var D=u.b.input(L(),f.phone(G())),V=u.b.div(F(),f.phone(M())),Y=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=A(e).call(this,t))||"object"!==H(o)&&"function"!=typeof o?T(r):o).state={viewport:{latitude:t.currentCity.lat,longitude:t.currentCity.lng,zoom:12.5,maxZoom:16,bearing:0,pitch:0,width:window.innerWidth,height:window.innerHeight},markers:[],textValue:"",inputFormActive:!1,currCoords:[],xYpoint:[],geoJSONarray:[]},n.onSubmitHandler=n.onSubmitHandler.bind(T(n)),n.saveMarker=n.saveMarker.bind(T(n)),n.onClickHandler=n.onClickHandler.bind(T(n)),n.saveGeoJSON=n.saveGeoJSON.bind(T(n)),n.parseGeoJSON=n.parseGeoJSON.bind(T(n)),n.onChangeInputHandler=n.onChangeInputHandler.bind(T(n)),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,t),n=e,(r=[{key:"onClickHandler",value:function(t){var e=t.point,n=J(t.lngLat,2),r=n[0],o=n[1];document.getElementById("inputElement")?this.setState({inputFormActive:!1}):(this.setState({inputFormActive:!0,currCoords:[r,o],xYpoint:e}),document.getElementById("inputElement").focus())}},{key:"onChangeInputHandler",value:function(t){t.preventDefault(),this.setState({textValue:t.target.value})}},{key:"onSubmitHandler",value:function(t){if(t.preventDefault(),""!==document.getElementById("inputElement").value){var e=this.parseGeoJSON();this.saveGeoJSON(e),this.saveMarker(this.state.currCoords[0],this.state.currCoords[1],e)}this.setState({inputFormActive:!1})}},{key:"saveGeoJSON",value:function(t){var e=this.state.geoJSONarray;e.push(t),this.setState({geoJSONarray:e})}},{key:"saveMarker",value:function(t,e,n){var r=this.state.markers;r.push([t,e]),this.setState({markers:r})}},{key:"parseGeoJSON",value:function(){return{type:"Feature",geometry:{type:"Point",coordinates:this.state.currCoords},properties:{name:this.state.textValue}}}},{key:"render",value:function(){var t=this,e=this.state.viewport;return o.a.createElement(P.b,z({},e,{mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:function(e){return t.setState({viewport:e})},mapboxApiAccessToken:"undefined",onClick:this.onClickHandler}),this.state.inputFormActive?o.a.createElement("form",{id:"inputForm",onSubmit:this.onSubmitHandler},o.a.createElement(D,{id:"inputElement",type:"text",onChange:this.onChangeInputHandler,style:{left:"".concat(this.state.xYpoint[0],"px"),top:"".concat(this.state.xYpoint[1],"px")}})):null,0!==this.state.markers.length?this.state.markers.map((function(e,n){return o.a.createElement(P.a,{id:"markers",latitude:e[1],longitude:e[0],key:n},o.a.createElement(V,null,t.state.geoJSONarray.length?t.state.geoJSONarray[n].properties.name:null))})):null)}}])&&N(n.prototype,r),i&&N(n,i),e}(r.Component),R=n(23),Q=n.n(R);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var X=500,$=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=Z(e).call(this,t))||"object"!==U(o)&&"function"!=typeof o?q(r):o).state={currentCity:{country:"US",name:"San Francisco",lat:37.778810345244956,lng:-122.42208050200567},isLoading:!1},n.searchCity=Q.a.debounce(n.searchCity.bind(q(n)),X),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){window.location.href.split("/").push("sanfrancisco"),this.setState({city:window.location.href.split("/")[3]})}},{key:"searchCity",value:function(t){fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(cityQuery,".json")).then((function(t){return console.log(JSON.stringify(t))})).catch((function(t){return console.log(t.stack)}))}},{key:"updateCity",value:function(t){var e=this;fetch("/".concat(t)).then((function(t){return e.setState({currentCity:t})})).catch((function(t){return console.log(t.stack)}))}},{key:"render",value:function(){return o.a.createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0}},o.a.createElement(_,{style:{position:"absolute"},searchCity:this.searchCity,isLoading:this.isLoading}),o.a.createElement(Y,{currentCity:this.state.currentCity}))}}])&&W(n.prototype,r),i&&W(n,i),e}(o.a.Component);n(54);a.a.render(o.a.createElement($,null),document.getElementById("app"))}});